<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin & Win a Guaranteed Prize!</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Confetti.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-color: #ff3b8d;
            --secondary-color: #ff8cbf;
            --claim-color: #1dd1a1;
            --dark-bg: #1a052e;
            --light-text: #ffffff;
            --glow-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color), 0 0 30px var(--secondary-color);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #2e084d, var(--dark-bg));
            color: var(--light-text);
            padding: 20px;
        }

        .container {
            text-align: center;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            max-width: 420px;
            width: 100%;
        }

        .ad-container {
            margin: 15px auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.2em;
            font-weight: 800;
            text-shadow: var(--glow-shadow);
            margin-bottom: 5px;
        }

        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px auto 20px;
        }

        #spinWheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: contain;
            transition: transform 7s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .pointer {
            position: absolute;
            top: -15px; left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-top: 40px solid var(--primary-color);
            filter: drop-shadow(0 -3px 5px rgba(0,0,0,0.5));
            z-index: 10;
        }

        .step-section { display: none; }
        .step-section.active { display: block; }

        .btn {
            font-family: 'Poppins', sans-serif;
            padding: 15px 30px;
            font-size: 1.4em;
            font-weight: 600;
            cursor: pointer;
            border: none;
            border-radius: 50px;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            width: 90%;
            max-width: 320px;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover:not(:disabled) { transform: translateY(-5px) scale(1.05); }
        .btn:disabled { background: #777; cursor: not-allowed; box-shadow: none; opacity: 0.7; }
        
        #spinButton { background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); box-shadow: var(--glow-shadow); }
        #getPrizeButton { background: linear-gradient(45deg, var(--claim-color), #4dffc9); box-shadow: 0 0 10px var(--claim-color), 0 0 20px var(--claim-color); }
        #whatsappShareButton { background: linear-gradient(45deg, #25D366, #128C7E); box-shadow: 0 0 10px #25D366, 0 0 20px #25D366; }
        #submitButton { background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); box-shadow: var(--glow-shadow); }
        
        h2 { font-family: 'Poppins', sans-serif; font-size: 1.8em; color: #4dffc9; text-shadow: 0 0 10px #4dffc9; margin-bottom: 10px; }
        p { font-size: 1.1em; line-height: 1.6; margin-bottom: 25px; }
        strong.prize { font-weight: bold; color: var(--secondary-color); font-size: 1.3em; }

        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group input {
            width: 100%; padding: 12px 15px; border-radius: 10px;
            border: 2px solid var(--secondary-color);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light-text); font-size: 1em;
        }
        .form-group input::placeholder { color: #ccc; }
        .form-group input:focus { outline: none; box-shadow: var(--glow-shadow); }

        @media (max-width: 480px) {
            .header h1 { font-size: 1.8em; }
            .wheel-container { width: 250px; height: 250px; }
            .btn { font-size: 1.2em; }
        }
    </style>
</head>
<body>

    <div class="container">
        
        <!-- ====================== -->
        <!-- == TOP AD BANNER ===== -->
        <!-- ====================== -->
        <div class="ad-container">
            <script type="text/javascript">
                atOptions = {
                    'key' : '122ee80aa0bbfbcfe53c46d08b2d9c40',
                    'format' : 'iframe',
                    'height' : 50,
                    'width' : 320,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/122ee80aa0bbfbcfe53c46d08b2d9c40/invoke.js"></script>
        </div>

        <div class="header">
            <h1>Spin the Wheel & Win a Guaranteed Prize!</h1>
        </div>
        <div class="wheel-container">
            <div class="pointer"></div>
            <img id="spinWheel" src="spin.png" alt="Spin Wheel of Prizes">
        </div>
        
        <!-- ====================== -->
        <!-- == MIDDLE AD BANNER == -->
        <!-- ====================== -->
        <div class="ad-container">
            <script type="text/javascript">
                atOptions = {
                    'key' : '8b0b391d1dbe9db28dbf2e0511aad5d6',
                    'format' : 'iframe',
                    'height' : 250,
                    'width' : 300,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/8b0b391d1dbe9db28dbf2e0511aad5d6/invoke.js"></script>
        </div>


        <!-- Step 1: Spin Button -->
        <div id="spinSection" class="step-section">
            <button id="spinButton" class="btn">Spin Now</button>
        </div>

        <!-- Step 2: Get Prize (Redirect to Ad) -->
        <div id="winSection" class="step-section">
            <h2>Congratulations!</h2>
            <p>You won <strong class="prize"></strong>!</p>
            <button id="getPrizeButton" class="btn">Get Prize</button>
        </div>
        
        <!-- Step 3: Share on WhatsApp (After returning from Ad) -->
        <div id="shareSection" class="step-section">
            <h2>Claim Your Prize!</h2>
            <p>You have won <strong class="prize"></strong>!</p>
            <p>To continue, please share this page with 10 of your WhatsApp friends.</p>
            <a id="whatsappShareButton" class="btn" href="#">Share on WhatsApp</a>
        </div>

        <!-- Step 4: Prize Claim Form -->
        <div id="claimSection" class="step-section">
            <h2>Final Step</h2>
            <form id="claimForm">
                <div class="form-group"><input type="text" id="userName" placeholder="Enter Your Full Name" required></div>
                <div class="form-group"><input type="tel" id="userMobile" placeholder="Enter Your Mobile Number" required pattern="[0-9]{10}"></div>
                <button type="submit" id="submitButton" class="btn">Submit Claim</button>
            </form>
        </div>

        <!-- Step 5: Success Message -->
        <div id="successSection" class="step-section">
            <h2>Claim Submitted!</h2>
            <p>Your prize claim has been submitted successfully! You will be contacted soon.</p>
        </div>

        <!-- ====================== -->
        <!-- == BOTTOM AD BANNER == -->
        <!-- ====================== -->
        <div class="ad-container">
            <script type="text/javascript">
                atOptions = {
                    'key' : '122ee80aa0bbfbcfe53c46d08b2d9c40',
                    'format' : 'iframe',
                    'height' : 50,
                    'width' : 320,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/122ee80aa0bbfbcfe53c46d08b2d9c40/invoke.js"></script>
        </div>

    </div>

    <script>
    // --- JAVASCRIPT LOGIC ---

    const allSections = document.querySelectorAll('.step-section');
    const spinWheel = document.getElementById('spinWheel');
    const spinButton = document.getElementById('spinButton');
    const getPrizeButton = document.getElementById('getPrizeButton');
    const whatsappShareButton = document.getElementById('whatsappShareButton');
    const claimForm = document.getElementById('claimForm');
    const prizeElements = document.querySelectorAll('.prize');

    // ==========================================================
    // == AD URL YAHAN UPDATE KI GAYI HAI =======================
    // ==========================================================
    const adUrl = "https://www.profitableratecpm.com/x0ev8ff2?key=ae369134f7e5b0e1a1e0617118a43865";

    const prizes = [
        "₹100 PayTM Cash", "Movie Ticket", "iPhone 14", "Samsung TV",
        "Smartwatch", "Bluetooth Speaker", "AirPods", "Better Luck Next Time",
        "Amazon Voucher ₹50", "Free Coffee Coupon", "20% Discount Voucher", "Surprise Gift Box"
    ];
    const winnablePrizes = prizes.filter(p => p !== "Better Luck Next Time");
    const numPrizes = prizes.length;
    const segmentAngle = 360 / numPrizes;
    let isSpinning = false;

    function showSection(sectionId) {
        allSections.forEach(section => section.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');
    }

    window.addEventListener('DOMContentLoaded', () => {
        const adVisited = sessionStorage.getItem('adVisited');
        const wonPrize = sessionStorage.getItem('wonPrize');
        if (adVisited === 'true' && wonPrize) {
            prizeElements.forEach(el => el.textContent = wonPrize);
            showSection('shareSection');
        } else {
            sessionStorage.clear();
            showSection('spinSection');
        }
    });
    
    spinButton.addEventListener('click', () => {
        if (isSpinning) return;
        isSpinning = true;
        spinButton.disabled = true;
        const winner = winnablePrizes[Math.floor(Math.random() * winnablePrizes.length)];
        const winnerIndex = prizes.indexOf(winner);
        const fullRotations = 5 * 360;
        const targetAngle = winnerIndex * segmentAngle;
        const randomOffset = Math.random() * (segmentAngle - 10) - (segmentAngle / 2 - 5);
        const finalRotation = fullRotations + (360 - targetAngle) + randomOffset;
        spinWheel.style.transform = `rotate(${finalRotation}deg)`;
        setTimeout(() => {
            confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 } });
            sessionStorage.setItem('wonPrize', winner);
            prizeElements.forEach(el => el.textContent = winner);
            showSection('winSection');
            isSpinning = false;
        }, 7000);
    });

    getPrizeButton.addEventListener('click', () => {
        sessionStorage.setItem('adVisited', 'true');
        window.location.href = adUrl;
    });

    whatsappShareButton.addEventListener('click', (e) => {
        e.preventDefault();
        const shareText = "I just won a real prize on this Spin & Win page! Try your luck too!";
        const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareText)}`;
        window.open(whatsappUrl, '_blank');
        whatsappShareButton.textContent = 'Verifying...';
        whatsappShareButton.disabled = true;
        setTimeout(() => {
            showSection('claimSection');
        }, 2500);
    });

    claimForm.addEventListener('submit', (e) => {
        e.preventDefault();
        sessionStorage.clear();
        showSection('successSection');
    });

    </script>

</body>
</html>